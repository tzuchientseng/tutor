import{d as C,r as u,u as O,c as _,o as g,g as c,a as e,v,C as N,w as B,_ as y,t as R,D as T,i as S,B as $,x as L,n as U,l as q,F as M,e as k}from"./index-peb6hTeG.js";import{S as m}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{u as V}from"./authStore-CT5x_V2u.js";const F={class:"custom-checkbox-wrapper"},K=C({__name:"LoginForm",emits:["login-success"],setup(b,{emit:w}){const f=w,l=u(""),n=u(""),s=u(!1),p=O(),r=V();async function i(){m.fire({title:"Logging in...",text:"Please wait while we log you in.",allowOutsideClick:!1,showConfirmButton:!1,willOpen:()=>m.showLoading()});const d=await r.login(l.value,n.value,s.value);m.close(),d.success?m.fire({title:"Success",text:"Login successful!",icon:"success",confirmButtonColor:"#3085d6"}).then(()=>{f("login-success"),p.push("/student-area")}):m.fire({title:"Login Failed",text:d.message,icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#3085d6"})}return(d,o)=>(g(),_("form",{id:"login-form",onSubmit:B(i,["prevent"])},[c(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=x=>l.value=x),placeholder:"電話 (帳號)",autocomplete:"username",required:""},null,512),[[v,l.value]]),c(e("input",{type:"password","onUpdate:modelValue":o[1]||(o[1]=x=>n.value=x),placeholder:"姓名 (密碼)",autocomplete:"current-password",required:""},null,512),[[v,n.value]]),e("label",null,[e("span",F,[c(e("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=x=>s.value=x)},null,512),[[N,s.value]]),o[3]||(o[3]=e("span",{class:"custom-checkbox"},null,-1))]),o[4]||(o[4]=e("span",{class:"custom-checkbox-text"},"保持登入",-1))]),o[5]||(o[5]=e("button",{type:"submit"},"登入",-1))],32))}}),P=y(K,[["__scopeId","data-v-28786696"]]),A={class:"form-wrapper"},D={class:"form-group"},E={class:"form-group"},z={class:"form-group"},j={class:"form-group"},G={class:"form-group"},H={class:"form-group"},J=["disabled"],Q=["disabled"],W=C({__name:"RegisterModal",emits:["success","cancel"],setup(b,{emit:w}){const f=w,l=u(""),n=u(""),s=u(""),p=u(""),r=u(""),i=u(""),d=u(!1),o=V();async function x(){if(!l.value||!n.value||!s.value||!p.value||!r.value||!i.value){await m.fire({icon:"warning",title:"欄位未填寫完整",text:"請確認所有欄位皆已填寫",confirmButtonText:"OK",confirmButtonColor:"#3085d6"});return}if(r.value!==i.value){await m.fire({icon:"error",title:"密碼不一致",text:"密碼與確認密碼不相符，請重新確認",confirmButtonText:"OK",confirmButtonColor:"#3085d6"});return}d.value=!0;const{success:h,message:t}=await o.register(l.value,p.value,r.value,n.value,s.value);d.value=!1,h?(await m.fire({icon:"success",title:"註冊成功",confirmButtonText:"OK",confirmButtonColor:"#3085d6"}),l.value="",n.value="",s.value="",p.value="",r.value="",i.value="",f("success")):await m.fire({icon:"error",title:"註冊失敗",html:t,confirmButtonText:"OK",confirmButtonColor:"#3085d6"})}function I(){f("cancel")}return(h,t)=>(g(),_("div",A,[t[12]||(t[12]=e("h2",{class:"form-title"},"註冊帳號",-1)),e("form",{onSubmit:B(x,["prevent"]),autocomplete:"on"},[e("div",D,[t[6]||(t[6]=e("label",{for:"name"},"姓名",-1)),c(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=a=>l.value=a),type:"text",placeholder:"請輸入姓名",autocomplete:"name",required:""},null,512),[[v,l.value]])]),e("div",E,[t[7]||(t[7]=e("label",{for:"username"},"帳號",-1)),c(e("input",{id:"username","onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a),type:"text",placeholder:"請輸入帳號",autocomplete:"username",autocapitalize:"off",spellcheck:"false",required:""},null,512),[[v,p.value]])]),e("div",z,[t[8]||(t[8]=e("label",{for:"email"},"Email",-1)),c(e("input",{id:"email","onUpdate:modelValue":t[2]||(t[2]=a=>n.value=a),type:"email",placeholder:"請輸入 Email",autocomplete:"email",inputmode:"email",autocapitalize:"off",spellcheck:"false",required:""},null,512),[[v,n.value]])]),e("div",j,[t[9]||(t[9]=e("label",{for:"phone"},"手機號碼",-1)),c(e("input",{id:"phone","onUpdate:modelValue":t[3]||(t[3]=a=>s.value=a),type:"tel",placeholder:"請輸入手機號碼",autocomplete:"tel",inputmode:"tel",required:""},null,512),[[v,s.value]])]),e("div",G,[t[10]||(t[10]=e("label",{for:"password"},"密碼",-1)),c(e("input",{id:"password","onUpdate:modelValue":t[4]||(t[4]=a=>r.value=a),type:"password",placeholder:"請輸入密碼",autocomplete:"new-password",required:""},null,512),[[v,r.value]])]),e("div",H,[t[11]||(t[11]=e("label",{for:"confirmPassword"},"確認密碼",-1)),c(e("input",{id:"confirmPassword","onUpdate:modelValue":t[5]||(t[5]=a=>i.value=a),type:"password",placeholder:"再次輸入密碼",autocomplete:"new-password",required:""},null,512),[[v,i.value]])]),e("button",{type:"submit",disabled:d.value},R(d.value?"註冊中...":"註冊"),9,J),e("button",{type:"button",class:"cancel",onClick:I,disabled:d.value}," 返回登入 ",8,Q)],32)]))}}),X=y(W,[["__scopeId","data-v-21f32620"]]),Y={},Z={id:"background"};function ee(b,w){return g(),_("div",Z,[T(b.$slots,"default",{},void 0)])}const te=y(Y,[["render",ee],["__scopeId","data-v-22038a82"]]),oe={},se={id:"card-container"};function le(b,w){return g(),_("div",se,[T(b.$slots,"default",{},void 0)])}const ne=y(oe,[["render",le],["__scopeId","data-v-399f7c81"]]),ae={class:"user-name"},ue={class:"text-center mt-3 p-1"},re=C({__name:"LoginView",setup(b){const w=O(),f=V(),l=S(()=>f.isAuthenticated),n=S(()=>f.getUserName),s=u(!1);function p(){f.logout(),w.push("/")}function r(){s.value=!0}function i(){s.value=!1}return(d,o)=>(g(),$(te,null,{default:L(()=>[U(ne,null,{default:L(()=>[l.value?(g(),_(M,{key:0},[e("h2",null,[o[0]||(o[0]=k(" 歡迎 ~ ",-1)),e("span",ae,R(n.value),1),o[1]||(o[1]=k(" ! ",-1))]),o[2]||(o[2]=e("h3",null,"您已登入",-1)),e("button",{class:"logout-button",onClick:p},"登出")],64)):s.value?q("",!0):(g(),_(M,{key:1},[o[4]||(o[4]=e("h2",null,"歡迎登入!",-1)),o[5]||(o[5]=e("h3",null,"請填寫帳號密碼",-1)),U(P),e("p",ue,[o[3]||(o[3]=k(" 還沒有帳號？ ",-1)),e("a",{href:"#",class:"register-link",onClick:B(r,["prevent"])},"點此註冊")])],64)),s.value?(g(),$(X,{key:2,onCancel:i,onSuccess:i})):q("",!0)]),_:1})]),_:1}))}}),ce=y(re,[["__scopeId","data-v-0d22f004"]]);export{ce as default};
