import{d as y,r as S,i as E,j as z,c,a as e,k as b,n as x,l as m,m as V,p as f,o as i,e as D,_ as M,f as j,q as k,t as w,F as $,s as C}from"./index--j3e_Cgi.js";const A={class:"navbar"},R=["aria-expanded"],T={key:0,class:"nav-links"},W=y({__name:"HamburgerButton",setup(p){const s=S(!1),r=S(window.innerWidth>=768),u=()=>{s.value=!s.value},n=()=>{r.value=window.innerWidth>=768};return E(()=>{n(),window.addEventListener("resize",n)}),z(()=>{window.removeEventListener("resize",n)}),(_,o)=>{const v=V("RouterLink");return i(),c("nav",A,[e("button",{class:x(["menu-icon",{active:s.value}]),onClick:u,"aria-label":"切換選單","aria-expanded":s.value.toString()},o[0]||(o[0]=[e("span",{class:"bar top"},null,-1),e("span",{class:"bar middle"},null,-1),e("span",{class:"bar bottom"},null,-1)]),10,R),s.value||r.value?(i(),c("ul",T,[e("li",null,[m(v,{to:"/"},{default:f(()=>o[1]||(o[1]=[D("首頁",-1)])),_:1,__:[1]})]),e("li",null,[m(v,{to:"/login"},{default:f(()=>o[2]||(o[2]=[D("帳號登入",-1)])),_:1,__:[2]})]),e("li",null,[m(v,{to:{name:"StudentProgress"}},{default:f(()=>o[3]||(o[3]=[D("學習狀況",-1)])),_:1,__:[3]})]),e("li",null,[m(v,{to:{name:"CourseIntro"}},{default:f(()=>o[4]||(o[4]=[D("課程介紹",-1)])),_:1,__:[4]})])])):b("",!0)])}}}),H=M(W,[["__scopeId","data-v-33f0fc4d"]]),P="https://home.sunnytseng.com/api/tutor/calendar",U=j("calendar",()=>{const p=S([]),s=n=>`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}`;return{events:p,getEventByDate:n=>p.value.filter(_=>{const o=new Date(_.datetime);return s(o)===n}),loadEvents:async()=>{try{const n=await fetch(P);if(!n.ok)throw new Error("無法載入事件資料");const _=await n.json();p.value=_}catch(n){console.error("載入行事曆事件時發生錯誤:",n)}}}}),q={class:"calendar-container"},O={class:"calendar-header"},G={class:"calendar-grid"},J=["onClick"],K={key:0},Q={key:0},X={key:1},Z=y({__name:"ScheduleCalendar",setup(p){const s=U();E(()=>{s.loadEvents()});const r=new Date,u=S(new Date),n=k(()=>u.value.getFullYear()),_=k(()=>u.value.getMonth()),o=["日","一","二","三","四","五","六"],v=t=>`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`,B=k(()=>{const t=n.value,l=_.value,a=new Date(t,l,1),h=new Date(t,l+1,0),g=[];for(let d=0;d<a.getDay();d++)g.push(null);for(let d=1;d<=h.getDate();d++)g.push(new Date(t,l,d));return g}),F=t=>t?t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate():!1,L=t=>{if(!t)return!1;const l=v(t);return s.getEventByDate(l).length>0},I=()=>{const t=new Date(u.value);t.setMonth(t.getMonth()-1),u.value=t},Y=()=>{const t=new Date(u.value);t.setMonth(t.getMonth()+1),u.value=t},N=t=>{const l=v(t),a=s.getEventByDate(l);if(a.length===0)alert(`${l} 沒有排定事件`);else{const h=a.map(g=>{const d=new Date(g.datetime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`📘 ${g.title} @ ${d}`}).join(`
`);alert(`${l} 有 ${a.length} 筆事件：
${h}`)}};return(t,l)=>(i(),c("div",q,[e("div",O,[e("button",{onClick:I},"‹"),e("h2",null,w(n.value)+" 年 "+w(_.value+1)+" 月",1),e("button",{onClick:Y},"›")]),e("div",G,[(i(),c($,null,C(o,a=>e("div",{class:"day-name",key:a},w(a),1)),64)),(i(!0),c($,null,C(B.value,(a,h)=>(i(),c("div",{class:x(["day-cell",{today:F(a)}]),key:h,onClick:g=>a&&N(a)},[a?(i(),c("div",K,[e("div",null,w(a.getDate()),1),L(a)?(i(),c("div",Q,"☑️")):b("",!0)])):(i(),c("div",X," "))],10,J))),128))])]))}}),tt=M(Z,[["__scopeId","data-v-97370f31"]]),et={class:"main-content schedule-section"},nt=y({__name:"StudentArea",setup(p){return(s,r)=>(i(),c($,null,[m(H),e("section",et,[r[0]||(r[0]=e("div",{id:"BannerWrapper"},[e("h1",{class:"title"},"預約時段")],-1)),m(tt)])],64))}}),ot=M(nt,[["__scopeId","data-v-3a5a4de8"]]);export{ot as default};
